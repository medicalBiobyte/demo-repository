IMG2TEXT_PROMPT = """
다음은 제품 광고에서 추출한 텍스트(raw_text)입니다.  
이 텍스트에서 다음 항목을 추출해 주세요:

1. 제품명  
- 가장 눈에 띄는 상품명 또는 브랜드 이름  
- 영어와 한글 모두 존재하면 병기 (예: 키즈픽션 / KIDSFICTION)

2. 효능에 대한 광고 주장  
- “성장에 도움”, “면역력 향상”, “집중력”, “100% 환불” 등의 표현  
- 광고 상 문구를 되도록 있는 그대로 정리  
- 여러 문장일 경우 줄바꿈하여 나열

주의사항:  
- 추정하거나 상상하지 말고, 보이는 텍스트 기반으로만 추출  
- 출력은 JSON 형식으로 반환

예시 출력:
{
  "제품명": "키즈픽션 / KIDSFICTION",
  "효능_주장": [
    "효과 없을 시 100% 환불 책임 보장",
    "SR103 효모추출물 100%",
    "발효녹용 단백질 함유",
    "면역력에 좋은 유산균 2천억 CFU"
  ]
}
"""

WEB2INGREDIENT_PROMPT = """
다음은 건강기능식품 또는 의약외품 제품에 대한 웹 검색 결과입니다.

이 텍스트에는 다음 항목들이 포함되어 있습니다:
- 각 문단: 제품 설명 또는 성분 관련 정보
- 각 문단 말미: 해당 정보의 출처 URL (예: "출처: https://example.com/xxx")

이 텍스트를 바탕으로 다음 항목들을 JSON 형식으로 추출해 주세요:

---

1. 🔍 **성분_추출_출처**:
    - 어떤 실제 URL에서 어떤 성분이 나왔는지 정리
    - 어떤 문서(URL)에서 해당 내용을 확인했는지
    - 형식: { "성분명": "아연", "효능": "면역력 강화", "출처": "https://~~~" }
    - `"성분_내용"`: 해당 페이지에 언급된 성분 나열
    - 여러 출처가 있을 수 있으므로 배열 형태로 작성
    - 주의: 출처(URL)는 반드시 효능이 언급된 문장과 연결된 실제 URL이어야 합니다.
    - 주의: 블로그, 쇼핑몰, 커뮤니티 기반 정보는 배제하고 신뢰 가능한 공식 기관, 의학적/학술적 출처의 문단에서만 성분의 효능을 추출해 주세요.

2. 🧪 **확정_성분**:
    - 위 출처들을 바탕으로 정리된 최종 성분 리스트
    - 중복 제거, 일반 용어(예: "영양소", "비타민")는 제외

3. 🧠 **성분_효능**:
    - 각 성분이 어떤 효능을 갖는다고 설명되었는지 정리
    - "성장 촉진", "면역력 강화" 등 실제 표현을 유지

4. 📝 **요약**:
    - 이 제품이 어떤 효능을 중심으로 광고되고 있는지 요약
    - 핵심 문장 1~2개 이내

---

📥 아래는 웹 검색 결과 텍스트입니다:

{web_text}

---

출력 형식 예시:
```json
{
  "성분_추출_출처": [
    {
      "url": "https://example.com/product/kidsfiction",
      "성분_내용": "SR103 효모추출물, 발효녹용 단백질, 유산균 CFU 200Bn"
    }
  ],
  "확정_성분": [
    "SR103 효모추출물",
    "발효녹용 단백질",
    "유산균"
  ],
  "성분_효능": [
    {
      "성분명": "SR103 효모추출물",
      "효능": "성장 호르몬 분비 촉진"
    },
    {
      "성분명": "유산균",
      "효능": "장 건강, 면역력 강화"
    }
  ],
  "요약": "성장 발달과 면역력 향상을 함께 강조하는 어린이 건강기능식품"
}
"""

QUERY2KEYWORD_PROMPT = """
다음은 건강기능식품 또는 의약외품에 대한 사용자 질문입니다:

"{query}"

이 질문에서 사용자가 기대하는 **효능/기능 키워드**를 추출해 주세요.

조건:
- 키워드는 구체적이고 의미 있는 표현만 포함 (예: "성장", "면역력", "집중력", "소화", "다이어트")
- "~에 도움이 되나요?" 같은 표현은 무시하고 핵심 목적만 추출
- 1~3개로 압축해서 추출
- 추측하거나 추가로 생성하지 말고, 질문 안에서 자연스럽게 유도된 것만 포함

출력 형식:
["키워드1", "키워드2", "키워드3"]

예시 질문 1:
"이 약 먹으면 키 크는 데 도움이 되나요?"
→ ["성장", "키"]

예시 질문 2:
"이 제품은 감기 예방이나 면역력 강화에 좋을까요?"
→ ["면역력"]

예시 질문 3:
"두뇌 발달이나 집중력 향상에 좋다던데 사실인가요?"
→ ["집중력", "두뇌", "학습"]
"""
